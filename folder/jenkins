#!/bin/env groovy

node {
    deleteDir()

    checkout scm

    files = sh(returnStdout: true, script: 'ls')
    println "list of property files"
    p_files = files.split("\n").collect()[2,3]
    println (p_files)
    
    
    properties([buildDiscarder(logRotator(numToKeepStr: '100')),
        parameters([
                choice(choices: p_files, 
				description: 'test test', 
				name: 'param_files'),
		X_files = sh(returnStdout:true, script: 'cat ${param_files}'),
                Y_files = X_files.split("\n").collect(),
                Z_files = "return ${Y_files}",
                println (Z_files),
                choice(choices: ['dfdfd', 'dfdfd', 'dfdf', 'dfdf'], description: '', name: 'dd')
      	])
    ])
    
    sh 'echo Welcome to IT!'
}
